// GENERATED BY SCHEMOCK - DO NOT EDIT
// Mock resolvers for custom endpoints
// 
// These resolvers are copied from your defineEndpoint() calls.
// They receive { params, body, db, headers } and return the response.

import type { MockResolverContext } from 'schemock/schema';

type ResolverFn = (ctx: MockResolverContext) => unknown | Promise<unknown>;

export const endpointResolvers: Record<string, ResolverFn> = {
  // POST /api/posts/bulk-delete
  // Delete multiple posts at once
  postsBulkDelete: async({body,db})=>{let deleted=0;const failed=[];for(const id of body.ids){try{const result=db.post.delete({where:{id:{equals:id}}});if(result){deleted++}else{failed.push(id)}}catch{failed.push(id)}}return{deleted,failed}},

  // POST /api/posts/bulk-publish
  // Publish multiple posts at once
  postsBulkPublish: async({body,db})=>{let updated=0;for(const id of body.ids){const result=db.post.update({where:{id:{equals:id}},data:{published:body.published}});if(result)updated++}return{updated}},

  // GET /api/users/:userId/stats
  // Get statistics for a user
  usersByUserIdStats: async({params,db})=>{const posts=db.post.findMany({where:{authorId:{equals:params.userId}}});const comments=db.comment.findMany({where:{userId:{equals:params.userId}}});return{postCount:posts.length,commentCount:comments.length,totalViews:posts.reduce((sum,p)=>sum+(p.views||0),0),publishedPosts:posts.filter(p=>p.published).length}},

  // GET /api/search
  // Search across users and posts
  search: async({params,db})=>{const results={users:[],posts:[],total:0};const query=params.q?.toLowerCase()??"";if(params.type==="all"||params.type==="user"){const users=db.user.findMany({where:{name:{contains:query}},take:params.limit});results.users=users.map(u=>({id:u.id,name:u.name,email:u.email}))}if(params.type==="all"||params.type==="post"){const posts=db.post.findMany({where:{title:{contains:query}},take:params.limit});results.posts=posts.map(p=>{const author=db.user.findFirst({where:{id:{equals:p.authorId}}});return{id:p.id,title:p.title,authorName:author?.name??"Unknown"}})}results.total=results.users.length+results.posts.length;return results},

};