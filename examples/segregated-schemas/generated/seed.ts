// GENERATED BY SCHEMOCK - DO NOT EDIT
import { db } from './db';

export interface SeedCounts {
  user?: number;
  post?: number;
  comment?: number;
  postDetail?: number;
  userProfile?: number;
}

const defaultCounts: Required<SeedCounts> = {
  user: 5,
  post: 15,
  comment: 30,
  postDetail: 10,
  userProfile: 10,
};

function pickRandom<T>(arr: T[]): T | undefined {
  if (arr.length === 0) return undefined;
  return arr[Math.floor(Math.random() * arr.length)];
}

export function seed(counts: SeedCounts = {}): void {
  const merged = { ...defaultCounts, ...counts };

  // Track created entity IDs for foreign key references
  const ids: Record<string, string[]> = {};

  ids.user = [];
  for (let i = 0; i < merged.user; i++) {
    const item = db.user.create({});
    ids.user.push(item.id);
  }

  ids.post = [];
  for (let i = 0; i < merged.post; i++) {
    const item = db.post.create({});
    ids.post.push(item.id);
  }

  ids.comment = [];
  for (let i = 0; i < merged.comment; i++) {
    const item = db.comment.create({});
    ids.comment.push(item.id);
  }

  ids.postDetail = [];
  for (let i = 0; i < merged.postDetail; i++) {
    const item = db.postDetail.create({});
    ids.postDetail.push(item.id);
  }

  ids.userProfile = [];
  for (let i = 0; i < merged.userProfile; i++) {
    const item = db.userProfile.create({});
    ids.userProfile.push(item.id);
  }

}

export function reset(): void {
  db.userProfile.deleteMany({ where: {} });
  db.postDetail.deleteMany({ where: {} });
  db.comment.deleteMany({ where: {} });
  db.post.deleteMany({ where: {} });
  db.user.deleteMany({ where: {} });
}

export function getAll(): Record<string, unknown[]> {
  return {
    user: db.user.getAll(),
    post: db.post.getAll(),
    comment: db.comment.getAll(),
    postDetail: db.postDetail.getAll(),
    userProfile: db.userProfile.getAll(),
  };
}