// GENERATED BY SCHEMOCK - DO NOT EDIT
// MSW handlers for custom endpoints

import { http, HttpResponse } from 'msw';
import { db } from './db';
import { endpointResolvers } from './endpoint-resolvers';

export const endpointHandlers = [
  // POST /api/posts/bulk-delete
  http.post('/api/posts/bulk-delete', async ({ request, params: pathParams }) => {
    const body = await request.json();

    const headers: Record<string, string> = {};
    request.headers.forEach((value, key) => { headers[key] = value; });

    try {
      const result = await endpointResolvers.postsBulkDelete({ db, body, headers });
      return HttpResponse.json(result);
    } catch (error) {
      console.error(`Error in ${name}:`, error);
      const message = error instanceof Error ? error.message : "Internal server error";
      return HttpResponse.json({ error: message }, { status: 500 });
    }
  }),

  // POST /api/posts/bulk-publish
  http.post('/api/posts/bulk-publish', async ({ request, params: pathParams }) => {
    const body = await request.json();

    const headers: Record<string, string> = {};
    request.headers.forEach((value, key) => { headers[key] = value; });

    try {
      const result = await endpointResolvers.postsBulkPublish({ db, body, headers });
      return HttpResponse.json(result);
    } catch (error) {
      console.error(`Error in ${name}:`, error);
      const message = error instanceof Error ? error.message : "Internal server error";
      return HttpResponse.json({ error: message }, { status: 500 });
    }
  }),

  // GET /api/users/:userId/stats
  http.get('/api/users/:userId/stats', async ({ request, params: pathParams }) => {
    const url = new URL(request.url);
    const params = {
      userId: pathParams.userId as string,
    };

    const headers: Record<string, string> = {};
    request.headers.forEach((value, key) => { headers[key] = value; });

    try {
      const result = await endpointResolvers.usersByUserIdStats({ db, params, headers });
      return HttpResponse.json(result);
    } catch (error) {
      console.error(`Error in ${name}:`, error);
      const message = error instanceof Error ? error.message : "Internal server error";
      return HttpResponse.json({ error: message }, { status: 500 });
    }
  }),

  // GET /api/search
  http.get('/api/search', async ({ request, params: pathParams }) => {
    const url = new URL(request.url);
    const params = {
      q: url.searchParams.get('q') ?? undefined,
      type: url.searchParams.get('type') ?? "all",
      limit: Number(url.searchParams.get('limit') ?? 20),
    };

    const headers: Record<string, string> = {};
    request.headers.forEach((value, key) => { headers[key] = value; });

    try {
      const result = await endpointResolvers.search({ db, params, headers });
      return HttpResponse.json(result);
    } catch (error) {
      console.error(`Error in ${name}:`, error);
      const message = error instanceof Error ? error.message : "Internal server error";
      return HttpResponse.json({ error: message }, { status: 500 });
    }
  }),

];